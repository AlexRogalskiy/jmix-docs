[[qs-using-handlers]]
== Processing Events
Jmix provides an API to handle various events happening in the application - starting from entities persistence process to mouse clicks on a buttons.

With Jmix Studio, you can generate empty event handlers and then add your business logic into the generated code. For the conference planning application, we will process two events:

* Calculate talk end date on data save or update in the database
* Set default value for the talk duration when creating talk in the UI

[[qs-using-entity-lifecycle-callback]]
=== Using entity lifecycle callbacks

*Entity Callback* is a method that can be invoked during entity lifecycle. You can generate callbacks using entity designer in Jmix Studio.

image::processing-events/lifecycle-callback-creation-ui.png[align="center"]

For our case, we need to handle two events: `PrePersist` and `PreUpdate` to recalculate a talk's end date and time. First, let's add the following private method to the `Talk` class for the end date recalculation:

[source%nowrap,java]
----
private LocalDateTime calculateEndDate() {
    return (startDate != null && duration != null) ? startDate.plusHours(duration) : null;
}
----

Now, let's generate the `PrePersist` lifecycle callback by pressing the "plus" sign in the entity editor's UI shown above and invoke this method in it:

[source%nowrap,java]
----
@PrePersist
public void prePersist() {
    endDate = calculateEndDate();
}
----

We can invoke the same code in the `PreUpdate` callback handler. After that we are all set and ready for handling UI events.

[[qs-handling-screen-events]]
=== Handling screen events

Jmix's Generic UI allows developers to handle various events that are generated by screens and components. All you need to do is to create a method with a proper signature and annotation for a particular event. Jmix Studio provides a GUI that allows you to initiate handler's code generation from the component inspector.

To generate default value for the talk duration property we need to handle talk creation event in the editor screen. To do that, you need to open the `talk-edit.xml` file and select `window` component in the *Component Hierarchy* tool window in the top right corner in the Jmix Studio.

image::processing-events/component-hierarchy-window.png[align="center"]

After that, you should be able to see all possible handlers in th *Component Inspector* window in the left bottom corner of the IDE. The tool window may be collapsed, just expand it by pressing the corrsponding button on the left IDE window border.

image::processing-events/component-inspector-window.png[align="center"]

We need to process `InitEntityEvent` event, just double-click on the corresponding `<empty>` section in the *Component Inspector*. You will be redirected to the screen controller, where you should be able to fill the handler body with a simple assignment. Just get a newly created entity from the event object and set duration to one hour.

[source%nowrap,java]
----
@Subscribe
public void onInitEntity(InitEntityEvent<Talk> event) {
    event.getEntity().setDuration(1);
}
----

Now we are almost ready to run the application.